<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>动物灵魂原型测试</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .intro {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.1rem;
            color: #555;
        }
        
        .question-container {
            margin-bottom: 30px;
        }
        
        .question {
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: bold;
            color: #444;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .option {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            background: #f9f9f9;
        }
        
        .option:hover {
            border-color: #6a11cb;
            background: #f0f0f0;
        }
        
        .option.selected {
            border-color: #6a11cb;
            background: #e6f0ff;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result-container {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .animal-name {
            font-size: 2.5rem;
            color: #6a11cb;
            margin: 20px 0;
        }
        
        .animal-image-container {
            position: relative;
            margin: 20px auto;
            width: 200px;
            height: 200px;
        }
        
        .animal-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            border: 5px solid #6a11cb;
            background-color: #f5f5f5;
        }
        
        .animal-emoji {
            font-size: 80px;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            display: none;
        }
        
        .image-loading {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f0f0f0;
            color: #666;
            font-size: 14px;
            border-radius: 50%;
            border: 2px dashed #ccc;
            display: none;
        }
        
        .animal-description {
            text-align: left;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            line-height: 1.8;
        }
        
        .traits {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .trait {
            background: #e6f0ff;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        /* 新增：维度分析样式 */
        .dimension-analysis {
            margin: 30px 0;
            text-align: left;
        }
        
        .dimension-title {
            font-size: 1.3rem;
            color: #6a11cb;
            margin: 25px 0 15px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid #e6f0ff;
        }
        
        .dimension-item {
            background: white;
            border: 2px solid #e6f0ff;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        
        .dimension-item:hover {
            border-color: #6a11cb;
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.1);
        }
        
        .dimension-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .dimension-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .dimension-bar {
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .dimension-progress {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease-in-out;
        }
        
        .dimension-value {
            text-align: right;
            font-size: 0.9rem;
            color: #666;
            font-weight: bold;
        }
        
        .strength-weakness {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .strength-box, .weakness-box {
            padding: 15px;
            border-radius: 10px;
            text-align: left;
        }
        
        .strength-box {
            background: #e8f5e8;
            border: 2px solid #4CAF50;
        }
        
        .weakness-box {
            background: #ffe8e8;
            border: 2px solid #f44336;
        }
        
        .strength-title, .weakness-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .strength-title {
            color: #2e7d32;
        }
        
        .weakness-title {
            color: #c62828;
        }
        
        .progress-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            width: 0%;
            transition: width 0.5s;
        }
        
        .question-counter {
            text-align: center;
            margin-bottom: 10px;
            color: #666;
        }
        
        .restart-btn {
            background: #4CAF50;
            margin-top: 10px;
        }
        
        .reset-btn {
            background: #dc3545;
            margin-top: 10px;
        }
        
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        @media (max-width: 600px) {
            .container {
                border-radius: 10px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .animal-image-container {
                width: 150px;
                height: 150px;
            }
            
            .animal-emoji {
                font-size: 60px;
            }
            
            .strength-weakness {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>动物灵魂原型测试</h1>
            <p class="subtitle">探索你内心深处的动物本性</p>
        </header>
        
        <div class="content">
            <div id="intro-section">
                <div class="intro">
                    <p>在每个人的灵魂深处，都沉睡着一个古老的动物原型。它塑造着你的本能、你的魅力，甚至是你自己都未察觉的隐藏天赋。</p>
                    <p>完成这份灵魂问卷，只需回答15个问题，唤醒你的原始力量，看看是哪位"动物守护灵"一直与你同在。</p>
                    
                    <!-- 测试次数提醒 -->
                    <div id="test-limit-warning" class="warning" style="display: none;">
                        <p><strong>⚠️ 提示</strong></p>
                        <p>您已经完成过测试了！每个用户只能测试一次。</p>
                        <p>您上次的结果是：<strong id="previous-result"></strong></p>
                        <button id="view-previous-result" class="btn">查看上次结果</button>
                        <button id="reset-test" class="btn reset-btn">重置测试（谨慎使用）</button>
                    </div>
                </div>
                <button id="start-btn" class="btn">开始测试</button>
            </div>
            
            <div id="test-section" style="display: none;">
                <div class="question-counter">问题 <span id="current-question">1</span>/15</div>
                <div class="progress-bar">
                    <div class="progress" id="progress-bar"></div>
                </div>
                
                <div class="question-container">
                    <div class="question" id="question-text"></div>
                    <div class="options" id="options-container"></div>
                </div>
                
                <button id="next-btn" class="btn" disabled>下一题</button>
            </div>
            
            <div id="result-section" class="result-container">
                <h2>你的动物灵魂原型是：</h2>
                <div class="animal-name" id="result-name"></div>
                
                <!-- 图片显示区域 -->
                <div class="animal-image-container">
                    <img class="animal-image" id="result-image" src="" alt="动物图片" style="display: none;">
                    <div class="animal-emoji" id="result-emoji"></div>
                    <div class="image-loading" id="image-loading">图片加载中...</div>
                </div>
                
                <div class="traits" id="result-traits"></div>
                <div class="animal-description" id="result-description"></div>
                
                <!-- 新增：维度分析区域 -->
                <div class="dimension-analysis" id="dimension-analysis">
                    <h3 class="dimension-title">📊 性格维度分析</h3>
                    
                    <div class="dimension-item">
                        <div class="dimension-name">社交倾向</div>
                        <div class="dimension-description" id="social-description"></div>
                        <div class="dimension-bar">
                            <div class="dimension-progress" id="social-progress" style="width: 0%; background: linear-gradient(90deg, #ff6b6b, #ffa726);"></div>
                        </div>
                        <div class="dimension-value" id="social-value"></div>
                    </div>
                    
                    <div class="dimension-item">
                        <div class="dimension-name">能量水平</div>
                        <div class="dimension-description" id="energy-description"></div>
                        <div class="dimension-bar">
                            <div class="dimension-progress" id="energy-progress" style="width: 0%; background: linear-gradient(90deg, #4ecdc4, #45b7d1);"></div>
                        </div>
                        <div class="dimension-value" id="energy-value"></div>
                    </div>
                    
                    <div class="dimension-item">
                        <div class="dimension-name">思维模式</div>
                        <div class="dimension-description" id="mind-description"></div>
                        <div class="dimension-bar">
                            <div class="dimension-progress" id="mind-progress" style="width: 0%; background: linear-gradient(90deg, #96ceb4, #4caf50);"></div>
                        </div>
                        <div class="dimension-value" id="mind-value"></div>
                    </div>
                    
                    <div class="dimension-item">
                        <div class="dimension-name">风险偏好</div>
                        <div class="dimension-description" id="risk-description"></div>
                        <div class="dimension-bar">
                            <div class="dimension-progress" id="risk-progress" style="width: 0%; background: linear-gradient(90deg, #ff9ff3, #f368e0);"></div>
                        </div>
                        <div class="dimension-value" id="risk-value"></div>
                    </div>
                    
                    <div class="strength-weakness">
                        <div class="strength-box">
                            <div class="strength-title">💪 你的优势</div>
                            <div id="strengths-list"></div>
                        </div>
                        <div class="weakness-box">
                            <div class="weakness-title">🎯 成长建议</div>
                            <div id="weaknesses-list"></div>
                        </div>
                    </div>
                </div>
                
                <button id="restart-btn" class="btn restart-btn">重新测试</button>
            </div>
        </div>
    </div>

    <script>
        // 在页面加载时检查测试状态
        document.addEventListener('DOMContentLoaded', function() {
            checkTestStatus();
        });

        // 测试题目
        const questions = [
            {
                text: "周末早晨，天气极好，你第一件想做的事是？",
                options: [
                    { text: "约朋友去户外爬山、骑行或打球。", scores: { social: 2, energy: 2, mind: 0, risk: 1, environment: 1 } },
                    { text: "一个人去公园、博物馆或市场逛逛，享受独处时光。", scores: { social: -1, energy: 1, mind: 0, risk: 0, environment: 0 } },
                    { text: "继续赖床，或者窝在沙发里悠闲地吃早餐、刷手机。", scores: { social: -1, energy: -1, mind: 0, risk: -1, environment: -1 } },
                    { text: "立刻开始执行早已制定好的周末计划。", scores: { social: 0, energy: 1, mind: 1, risk: 0, environment: 1 } }
                ]
            },
            {
                text: "你的办公桌或书桌通常是怎样的状态？",
                options: [
                    { text: "整洁有序，每样东西都有固定位置。", scores: { social: 0, energy: 0, mind: 1, risk: -1, environment: 1 } },
                    { text: "堆满了东西，但我清楚每一样在哪，这是一种充满创意的'乱'。", scores: { social: 0, energy: 0, mind: -1, risk: 1, environment: -1 } },
                    { text: "会放一些家人、朋友或宠物的照片，感觉很温馨。", scores: { social: 1, energy: 0, mind: -1, risk: 0, environment: 0 } },
                    { text: "极简风格，只放当前必需的物品。", scores: { social: -1, energy: 0, mind: 1, risk: 0, environment: 0 } }
                ]
            },
            {
                text: "当你感到压力巨大时，什么最能治愈你？",
                options: [
                    { text: "找朋友倾诉，或参加热闹的社交活动。", scores: { social: 2, energy: 0, mind: -1, risk: 0, environment: 0 } },
                    { text: "一个人呆着，通过看书、听音乐或独处来充电。", scores: { social: -2, energy: -1, mind: 0, risk: 0, environment: -1 } },
                    { text: "投入大自然的怀抱，去爬山、看海或森林浴。", scores: { social: -1, energy: 1, mind: 0, risk: 1, environment: 0 } },
                    { text: "通过剧烈运动，比如跑步、健身，来释放压力。", scores: { social: 0, energy: 2, mind: 0, risk: 1, environment: 1 } }
                ]
            },
            {
                text: "旅行前，你会如何做计划？",
                options: [
                    { text: "做好详尽的攻略，时间地点精确到小时，不喜欢意外。", scores: { social: 0, energy: 0, mind: 2, risk: -2, environment: 1 } },
                    { text: "只定大框架，留出大量时间用于随性探索和发现。", scores: { social: 0, energy: 0, mind: -1, risk: 1, environment: 0 } },
                    { text: "更倾向于和朋友一起，他们定就好，我负责跟随和享受。", scores: { social: 1, energy: -1, mind: -1, risk: 0, environment: -1 } },
                    { text: "偏爱挑战性的旅程，如徒步、探险，并乐于自己做主。", scores: { social: 0, energy: 1, mind: 0, risk: 2, environment: 1 } }
                ]
            },
            {
                text: "在社交聚会中，你通常更像：",
                options: [
                    { text: "气氛担当，活跃在人群中央，享受被关注。", scores: { social: 2, energy: 1, mind: 0, risk: 1, environment: 1 } },
                    { text: "深度交流者，只和一两个人进行有意义的谈话。", scores: { social: 0, energy: 0, mind: 0, risk: 0, environment: 0 } },
                    { text: "观察者，安静地待在角落，看着大家，自得其乐。", scores: { social: -1, energy: -1, mind: 1, risk: -1, environment: -1 } },
                    { text: "组织者，操心着大家的饮料和情绪，确保没人被冷落。", scores: { social: 1, energy: 0, mind: 1, risk: 0, environment: 1 } }
                ]
            },
            {
                text: "你更偏爱哪种天气？",
                options: [
                    { text: "阳光明媚，温暖甚至炎热的大晴天。", scores: { social: 0, energy: 1, mind: 0, risk: 0, environment: 0 } },
                    { text: "凉爽的阴天，或者细雨绵绵的日子。", scores: { social: 0, energy: -1, mind: 0, risk: 0, environment: 0 } },
                    { text: "大雪纷飞，享受室内的温暖与静谧。", scores: { social: -1, energy: -1, mind: 0, risk: -1, environment: -1 } },
                    { text: "狂风暴雨，喜欢那种能量释放的感觉。", scores: { social: 0, energy: 1, mind: 0, risk: 1, environment: 0 } }
                ]
            },
            {
                text: "你如何处理一个突如其来的难题？",
                options: [
                    { text: "立即行动，在尝试中不断调整方案。", scores: { social: 0, energy: 1, mind: -1, risk: 1, environment: 1 } },
                    { text: "先冷静下来，系统地分析利弊，找出最优解。", scores: { social: 0, energy: 0, mind: 2, risk: -1, environment: 1 } },
                    { text: "寻求专家或朋友的建议，集思广益。", scores: { social: 1, energy: 0, mind: 0, risk: 0, environment: 0 } },
                    { text: "相信自己的直觉和感觉，跟着'心'走。", scores: { social: 0, energy: 0, mind: -1, risk: 0, environment: -1 } }
                ]
            },
            {
                text: "关于'家'的概念，你最认同以下哪种描述？",
                options: [
                    { text: "一个安全的堡垒，完全属于我自己，隔绝外界干扰。", scores: { social: -2, energy: -1, mind: 0, risk: -1, environment: -1 } },
                    { text: "一个热闹的社交中心，欢迎朋友常来常往。", scores: { social: 2, energy: 1, mind: 0, risk: 0, environment: 1 } },
                    { text: "一个温暖的港湾，是与家人共享爱与陪伴的地方。", scores: { social: 1, energy: 0, mind: -1, risk: 0, environment: 0 } },
                    { text: "一个休息站，更重要的是外面的广阔世界。", scores: { social: -1, energy: 1, mind: 0, risk: 1, environment: 0 } }
                ]
            },
            {
                text: "你更享受哪种类型的假期？",
                options: [
                    { text: "在热带海滩上躺着晒太阳，彻底放松。", scores: { social: 0, energy: -2, mind: 0, risk: -1, environment: -1 } },
                    { text: "穿梭于各大城市，逛遍博物馆、古迹和商场。", scores: { social: 0, energy: 1, mind: 1, risk: 0, environment: 0 } },
                    { text: "去野生动物园或自然保护区，观察动物。", scores: { social: -1, energy: 0, mind: 1, risk: 0, environment: 0 } },
                    { text: "参加徒步、露营、滑雪等户外运动假期。", scores: { social: 0, energy: 2, mind: 0, risk: 1, environment: 1 } }
                ]
            },
            {
                text: "你的消费习惯更接近？",
                options: [
                    { text: "有计划地储蓄和消费，对投资理财很感兴趣。", scores: { social: 0, energy: 0, mind: 2, risk: -1, environment: 1 } },
                    { text: "注重体验，愿意为美食、旅行和爱好花钱。", scores: { social: 0, energy: 0, mind: -1, risk: 1, environment: 0 } },
                    { text: "乐于为朋友和家人买单，看到他们开心我就开心。", scores: { social: 1, energy: 0, mind: -1, risk: 0, environment: 0 } },
                    { text: "实用主义，只买需要的，很少冲动消费。", scores: { social: 0, energy: 0, mind: 1, risk: -1, environment: 0 } }
                ]
            },
            {
                text: "你如何看待规则？",
                options: [
                    { text: "规则是用来遵守的，它们让世界更有秩序。", scores: { social: 0, energy: 0, mind: 1, risk: -1, environment: 1 } },
                    { text: "规则是用来打破的，创新往往发生在框架之外。", scores: { social: 0, energy: 1, mind: 0, risk: 2, environment: 0 } },
                    { text: "规则是参考，我更关心规则背后的人情与情境。", scores: { social: 0, energy: 0, mind: -1, risk: 0, environment: 0 } },
                    { text: "只要不影响到我和我在意的人，我并不太关心规则。", scores: { social: -1, energy: 0, mind: 0, risk: 0, environment: -1 } }
                ]
            },
            {
                text: "你一天中精力最充沛的时间段是？",
                options: [
                    { text: "清晨，醒来就充满活力。", scores: { social: 0, energy: 1, mind: 0, risk: 0, environment: 0 } },
                    { text: "深夜，万籁俱寂时思维最清晰。", scores: { social: -1, energy: 0, mind: 1, risk: 0, environment: -1 } },
                    { text: "下午到傍晚，需要一个缓慢的启动过程。", scores: { social: 0, energy: 0, mind: 0, risk: 0, environment: 0 } },
                    { text: "不固定，像猫一样可以随时充电小睡。", scores: { social: 0, energy: -1, mind: 0, risk: 0, environment: 0 } }
                ]
            },
            {
                text: "朋友对你最可能的评价是？",
                options: [
                    { text: "靠谱/稳重，像定心丸一样的存在。", scores: { social: 0, energy: 0, mind: 1, risk: -1, environment: 1 } },
                    { text: "有趣/有想法，总能看到不一样的角度。", scores: { social: 0, energy: 0, mind: 1, risk: 1, environment: 0 } },
                    { text: "温暖/贴心，像小太阳一样治愈。", scores: { social: 1, energy: 0, mind: -1, risk: 0, environment: 0 } },
                    { text: "独立/强大，有自己的一个小世界。", scores: { social: -1, energy: 0, mind: 0, risk: 0, environment: -1 } }
                ]
            },
            {
                text: "面对一个你非常想要的机会，但竞争激烈，你会？",
                options: [
                    { text: "全力以赴，积极准备，志在必得。", scores: { social: 0, energy: 2, mind: 0, risk: 2, environment: 1 } },
                    { text: "仔细评估胜算，如果太低就可能放弃。", scores: { social: 0, energy: 0, mind: 1, risk: -1, environment: 0 } },
                    { text: "寻求合作，看看能否和他人组队争取。", scores: { social: 1, energy: 0, mind: 0, risk: 0, environment: 0 } },
                    { text: "顺其自然，相信'是我的就是我的'。", scores: { social: 0, energy: -1, mind: 0, risk: -1, environment: -1 } }
                ]
            },
            {
                text: "如果变成动物，你内心最渴望拥有的是？",
                options: [
                    { text: "鹰击长空的自由和俯瞰一切的视野。", scores: { social: -1, energy: 1, mind: 1, risk: 1, environment: 1 } },
                    { text: "狮群中相互依偎的温暖和强大的力量。", scores: { social: 2, energy: 1, mind: 0, risk: 0, environment: 1 } },
                    { text: "狐狸般的机智敏捷和优雅神秘的魅力。", scores: { social: 0, energy: 0, mind: 1, risk: 0, environment: 0 } },
                    { text: "熊猫般的与世无争，被安稳照顾的惬意。", scores: { social: -1, energy: -2, mind: -1, risk: -2, environment: -1 } }
                ]
            }
        ];

        // 动物数据库（保持不变）
        const animals = [
            // === 高社交性动物 (social: 3-5) ===
            {
                name: "狼",
                traits: ["忠诚", "协作", "纪律性", "团队精神"],
                description: "你的灵魂原型是狼！你重视团队和家庭，拥有强大的忠诚度和协作精神。在群体中，你既可以是坚定的支持者，也可以是强有力的领导者。你的直觉敏锐，能够感知群体的情绪和动态。虽然你享受群体的温暖，但也保持着独立的思考和行动能力。",
                image: "🐺",
                imageUrl: "images/animals/狼.png",
                scores: { social: 5, energy: 4, mind: 3, risk: 3, environment: 4 }
            },
            {
                name: "狮子",
                traits: ["领袖", "自信", "保护者", "威严"],
                description: "你的灵魂原型是狮子！你天生具有领导气质，自信而威严。在群体中，你自然而然地承担起保护者和决策者的角色。你的力量不仅体现在行动上，更体现在你给予他人的安全感和方向感。你重视家庭和团队，会不惜一切守护你所在意的人。",
                image: "🦁",
                imageUrl: "images/animals/狮子.png",
                scores: { social: 4, energy: 4, mind: 2, risk: 4, environment: 5 }
            },
            {
                name: "海豚",
                traits: ["智慧", "友好", "爱玩", "高度社交"],
                description: "你的灵魂原型是海豚！你聪明、友好且充满活力，是群体中的开心果。你热爱社交，擅长沟通，能够轻松地与各种人建立联系。你的好奇心强，喜欢探索新事物，并且总是带着乐观和玩乐的心态面对生活。你的智慧和适应能力让你在各种环境中都能游刃有余。",
                image: "🐬",
                imageUrl: "images/animals/海豚.png",
                scores: { social: 5, energy: 4, mind: 3, risk: 2, environment: 2 }
            },
            {
                name: "大象",
                traits: ["智慧", "沉稳", "重感情", "记忆力强"],
                description: "你的灵魂原型是大象！你拥有超越年龄的沉稳与智慧，是群体中的定心丸。你重感情，记忆力强，对家人和朋友极为忠诚。你的力量巨大但从不滥用，总是以温和的方式解决问题。在团队中，你是大家信赖的依靠，你的存在本身就带来安全感。",
                image: "🐘",
                imageUrl: "images/animals/大象.png",
                scores: { social: 4, energy: 2, mind: 4, risk: 1, environment: 3 }
            },
            {
                name: "狐獴",
                traits: ["警觉", "协作", "家庭观念", "责任感"],
                description: "你的灵魂原型是狐獴！你具有强烈的责任感和家庭观念，总是为集体的利益着想。你的警觉性很高，善于发现潜在的风险并及时提醒他人。在团队中，你可能是那个默默付出的守护者，用你的细心和关怀维系着群体的和谐。",
                image: "🐾",
                imageUrl: "images/animals/狐獴.png",
                scores: { social: 5, energy: 3, mind: 3, risk: 2, environment: 2 }
            },
            {
                name: "蚂蚁",
                traits: ["勤奋", "组织性", "奉献精神", "效率"],
                description: "你的灵魂原型是蚂蚁！你具有惊人的勤奋和组织能力，相信集体的力量。你擅长在系统中找到自己的位置，并通过高效协作完成复杂任务。你的奉献精神让你愿意为更大的目标付出努力，这种看似微小实则强大的力量让你在团队中不可或缺。",
                image: "🐜",
                imageUrl: "images/animals/蚂蚁.png",
                scores: { social: 5, energy: 3, mind: 4, risk: 1, environment: 1 }
            },

            // === 中等社交性动物 (social: 0-3) ===
            {
                name: "马",
                traits: ["自由", "奔放", "优雅", "力量"],
                description: "你的灵魂原型是马！你热爱自由，向往广阔天地，但同时也懂得与伙伴协作。你的优雅和力量并存，既有细腻的情感感知，又有坚定的行动力。你享受群体的温暖，但也需要独处的空间来积蓄能量。",
                image: "🐎",
                imageUrl: "images/animals/马.png",
                scores: { social: 3, energy: 4, mind: 2, risk: 3, environment: 2 }
            },
            {
                name: "狗",
                traits: ["忠诚", "友善", "合作", "守护"],
                description: "你的灵魂原型是狗！你忠诚可靠，对朋友和家人无比珍视。你的友善和合作精神让你在群体中备受欢迎，而你天生的守护本能让你总是关心他人的安危。你重视关系，愿意为所爱之人付出一切。",
                image: "🐕",
                imageUrl: "images/animals/狗.png",
                scores: { social: 4, energy: 3, mind: 1, risk: 1, environment: 1 }
            },
            {
                name: "孔雀",
                traits: ["自信", "爱展示", "魅力", "艺术感"],
                description: "你的灵魂原型是孔雀！你天生具有表现欲和艺术气质，喜欢成为人群中的焦点。你的魅力不仅仅来自外表，更来自你独特的创造力和对美的追求。在社交场合中，你总能吸引他人的目光，用你的热情和活力感染周围的人。",
                image: "🦚",
                imageUrl: "images/animals/孔雀.png",
                scores: { social: 3, energy: 3, mind: -2, risk: 2, environment: 3 }
            },
            {
                name: "鹦鹉",
                traits: ["社交", "善于模仿", "活泼", "爱交流"],
                description: "你的灵魂原型是鹦鹉！你活泼开朗，善于与人交流，是群体中的气氛调节者。你的学习能力和模仿能力很强，能够快速适应不同的社交环境。你享受被关注的感觉，也乐于用你的智慧和幽默为他人带来欢乐。",
                image: "🦜",
                imageUrl: "images/animals/鹦鹉.png",
                scores: { social: 4, energy: 3, mind: 0, risk: 1, environment: 1 }
            },

            // === 低社交性/独居动物 (social: -3到0) ===
            {
                name: "老虎",
                traits: ["独行", "强大", "神秘", "领地意识"],
                description: "你的灵魂原型是老虎！你是独行的王者，强大而神秘。你享受孤独，在独处中积蓄力量。你的领地意识很强，清楚地知道自己的界限在哪里。虽然你不需要群体的认可，但一旦认定目标，就会展现出惊人的决心和力量。",
                image: "🐯",
                imageUrl: "images/animals/老虎.png",
                scores: { social: -3, energy: 4, mind: 3, risk: 4, environment: 4 }
            },
            {
                name: "猫",
                traits: ["独立", "优雅", "神秘", "自我"],
                description: "你的灵魂原型是猫！你独立自主，有着强烈的自我意识。你优雅而神秘，不喜欢被束缚，总是按照自己的节奏生活。你享受独处的时光，在这些时刻里思考、观察、积蓄能量。你的独立性让你在任何环境中都能保持自我。",
                image: "🐱",
                imageUrl: "images/animals/猫.png",
                scores: { social: -2, energy: 1, mind: 2, risk: 0, environment: -1 }
            },
            {
                name: "狐狸",
                traits: ["机智", "适应力", "好奇心", "独立"],
                description: "你的灵魂原型是狐狸！你机智敏捷，适应力强，总能在复杂的环境中找到最优解。你拥有敏锐的观察力和快速学习的能力，能够迅速适应变化。你的好奇心驱使你不断探索新领域，而你的独立性让你不依赖他人也能取得成功。",
                image: "🦊",
                imageUrl: "images/animals/狐狸.png",
                scores: { social: 0, energy: 3, mind: 4, risk: 3, environment: 2 }
            },
            {
                name: "熊",
                traits: ["力量", "独立", "沉稳", "自我保护"],
                description: "你的灵魂原型是熊！你拥有强大的内在力量，但更喜欢独来独往。你的沉稳让你在压力下保持冷静，而你的独立性让你不需要依赖他人。你懂得自我保护，清楚地知道何时该展现力量，何时该保持低调。",
                image: "🐻",
                imageUrl: "images/animals/熊.png",
                scores: { social: -2, energy: 2, mind: 2, risk: 1, environment: 1 }
            },

            // === 极低社交性动物 (social: -5到-3) ===
            {
                name: "雪豹",
                traits: ["神秘", "孤独", "适应极端", "美丽"],
                description: "你的灵魂原型是雪豹！你神秘而孤独，适应在极端环境中独自生存。你不需要他人的认可，在孤独中找到了自己的力量和美感。你的适应能力极强，能够在最艰难的环境中保持优雅和尊严。",
                image: "🐆",
                imageUrl: "images/animals/雪豹.png",
                scores: { social: -4, energy: 3, mind: 3, risk: 2, environment: 1 }
            },
            {
                name: "树懒",
                traits: ["极致的慢节奏", "节能主义", "平和", "与世无争"],
                description: "你的灵魂原型是树懒！你奉行'慢生活'哲学，懂得享受当下的每一刻。在这个快节奏的世界里，你保持着内心的平静与从容，从不急于求成。你的节能主义让你把精力用在真正重要的事情上，这种看似慵懒实则智慧的生活方式让你活得格外通透。",
                image: "🦥",
                imageUrl: "images/animals/树懒.png",
                scores: { social: -4, energy: -5, mind: -1, risk: -4, environment: -3 }
            },
            {
                name: "熊猫",
                traits: ["平和", "与世无争", "享受主义", "温和"],
                description: "你的灵魂原型是熊猫！你平和、与世无争，懂得享受生活的美好。你不喜欢竞争和冲突，宁愿花时间在让自己感到舒适和快乐的事情上。你的温和性格让你成为朋友中的调和剂，大家都喜欢与你相处。",
                image: "🐼",
                imageUrl: "images/animals/熊猫.png",
                scores: { social: -2, energy: -2, mind: -1, risk: -3, environment: -2 }
            },

            // === 高能量活跃动物 (energy: 3-5) ===
            {
                name: "猎豹",
                traits: ["速度", "专注", "爆发力", "日行性"],
                description: "你的灵魂原型是猎豹！你是速度与专注的化身，一旦锁定目标就会全力以赴。你的爆发力惊人，能够在短时间内完成令人瞩目的成就。你善于把握时机，知道何时该行动，何时该等待。虽然你不擅长持久战，但你的短时效率和精准度无人能及。",
                image: "🐆",
                imageUrl: "images/animals/猎豹.png",
                scores: { social: 0, energy: 5, mind: 3, risk: 4, environment: 3 }
            },
            {
                name: "松鼠",
                traits: ["勤奋", "未雨绸缪", "活跃", "收集癖"],
                description: "你的灵魂原型是松鼠！你充满活力，总是忙忙碌碌地为未来做准备。你的勤奋和远见让你在任何情况下都能游刃有余。你喜欢收集和整理，这种习惯不仅体现在物质上，也体现在知识和经验的积累上。",
                image: "🐿️",
                imageUrl: "images/animals/松鼠.png",
                scores: { social: 1, energy: 4, mind: 2, risk: 0, environment: 0 }
            },
            {
                name: "蜂鸟",
                traits: ["活力", "能量", "积极", "独行"],
                description: "你的灵魂原型是蜂鸟！你充满活力和正能量，总是积极地面对生活。你的行动迅速而精准，能够在复杂的环境中灵活穿梭。虽然你经常独自行动，但你的存在就像一道亮丽的风景，为周围带来生机和活力。",
                image: "🐦",
                imageUrl: "images/animals/蜂鸟.png",
                scores: { social: -1, energy: 5, mind: 1, risk: 2, environment: 0 }
            },

            // === 理性思维动物 (mind: 3-5) ===
            {
                name: "猫头鹰",
                traits: ["智慧", "理性", "观察力", "沉静"],
                description: "你的灵魂原型是猫头鹰！你是一个深思熟虑的观察者，拥有超凡的智慧和洞察力。在寂静的深夜，你的思维最为清晰，能够看透问题的本质。你重视知识和理性，不轻易被情绪左右。虽然你看起来有些孤僻，但实际上你只是享受独处时的深度思考。",
                image: "🦉",
                imageUrl: "images/animals/猫头鹰.png",
                scores: { social: -3, energy: 1, mind: 5, risk: 1, environment: 1 }
            },
            {
                name: "乌鸦",
                traits: ["极高智商", "适应力", "解决问题", "神秘"],
                description: "你的灵魂原型是乌鸦！你拥有惊人的智商和解决问题的能力。你的适应能力极强，能够在各种环境中找到生存之道。你善于观察和学习，能够从复杂的情况中提炼出关键信息。你的智慧让你在群体中显得与众不同。",
                image: "🐦‍⬛",
                imageUrl: "images/animals/乌鸦.png",
                scores: { social: 1, energy: 2, mind: 5, risk: 2, environment: 1 }
            },
            {
                name: "章鱼",
                traits: ["极聪明", "解决问题", "伪装者", "神秘"],
                description: "你的灵魂原型是章鱼！你极其聪明，善于解决复杂问题。你的适应能力和伪装能力让你能够在各种环境中游刃有余。你思维灵活，能够从多个角度分析问题，找到最巧妙的解决方案。你的智慧深藏不露，只在关键时刻展现。",
                image: "🐙",
                imageUrl: "images/animals/章鱼.png",
                scores: { social: -3, energy: 1, mind: 5, risk: 1, environment: -1 }
            },

            // === 感性思维动物 (mind: -5到-2) ===
            {
                name: "天鹅",
                traits: ["优雅", "忠诚", "宁静", "高贵"],
                description: "你的灵魂原型是天鹅！你优雅而感性，重视情感的深度和纯粹。你的忠诚让你在关系中无比珍贵，而你内在的宁静让你在任何情况下都保持优雅。你追求美和和谐，用你的感性智慧创造着温暖的人际关系。",
                image: "🦢",
                imageUrl: "images/animals/天鹅.png",
                scores: { social: 2, energy: 1, mind: -3, risk: -1, environment: 0 }
            },
            {
                name: "海牛",
                traits: ["温和", "善良", "平和", "慢节奏"],
                description: "你的灵魂原型是海牛！你温和善良，有着极强的共情能力。你的平和气质能够感染周围的人，创造和谐的氛围。你享受慢节奏的生活，在这种节奏中感受生活的美好和人与人之间的温暖连接。",
                image: "🐋",
                imageUrl: "images/animals/海牛.png",
                scores: { social: 2, energy: -2, mind: -4, risk: -3, environment: -2 }
            },

            // === 高风险偏好动物 (risk: 3-5) ===
            {
                name: "鹰",
                traits: ["远见", "自由", "权力", "洞察力"],
                description: "你的灵魂原型是鹰！你拥有超凡的远见和洞察力，总是能够从高处俯瞰全局。你珍视自由，不喜欢被束缚，渴望广阔的空间和无限的可能性。你的决策果断，行动迅速，是天生的领导者。虽然你有时显得孤独，但这正是你力量的源泉。",
                image: "🦅",
                imageUrl: "images/animals/鹰.png",
                scores: { social: -2, energy: 3, mind: 4, risk: 4, environment: 4 }
            },
            {
                name: "鲨鱼",
                traits: ["强大", "高效", "独行", "持续移动"],
                description: "你的灵魂原型是鲨鱼！你强大而高效，总是在前进中寻找机会。你的冒险精神让你不畏惧未知，反而在挑战中感到兴奋。你相信只有不断移动才能生存和发展，这种动态的生活方式让你始终保持竞争力。",
                image: "🦈",
                imageUrl: "images/animals/鲨鱼.png",
                scores: { social: -2, energy: 4, mind: 3, risk: 5, environment: 3 }
            },
            {
                name: "蜜獾",
                traits: ["无畏", "好斗", "坚韧", "不服输"],
                description: "你的灵魂原型是蜜獾！你无所畏惧，面对任何挑战都毫不退缩。你的坚韧和不服输的精神让你在逆境中越发强大。你不在乎对手的大小，只在乎自己的决心。这种勇气让你在困难面前总是能够坚持到最后。",
                image: "🐾",
                imageUrl: "images/animals/蜜獾.png",
                scores: { social: -1, energy: 4, mind: 1, risk: 5, environment: 2 }
            },

            // === 低风险偏好动物 (risk: -5到-2) ===
            {
                name: "乌龟",
                traits: ["耐心", "稳重", "长寿", "防御性"],
                description: "你的灵魂原型是乌龟！你极具耐心，相信'慢就是快'的哲学。你的稳重让你在冲动面前保持冷静，而你的防御性思维让你能够避开不必要的风险。你注重长期收益，愿意为未来的安全付出现在的努力。",
                image: "🐢",
                imageUrl: "images/animals/乌龟.png",
                scores: { social: -1, energy: -2, mind: 2, risk: -4, environment: -2 }
            },
            {
                name: "刺猬",
                traits: ["防御性强", "内向", "善良", "谨慎"],
                description: "你的灵魂原型是刺猬！你谨慎而善良，有着强烈的自我保护意识。你的防御机制让你能够避开伤害，但一旦获得你的信任，你会发现你内心的柔软和温暖。你的谨慎不是胆小，而是对生命的尊重和珍视。",
                image: "🦔",
                imageUrl: "images/animals/刺猬.png",
                scores: { social: -3, energy: 0, mind: 1, risk: -4, environment: -3 }
            },

            // === 领导型动物 (environment: 3-5) ===
            {
                name: "猩猩",
                traits: ["智慧", "力量", "领导力", "家庭观念"],
                description: "你的灵魂原型是猩猩！你拥有非凡的智慧和强大的领导能力。你的力量不仅来自身体，更来自你的智慧和经验。你重视家庭和群体，会用你的能力保护和引导你所关心的人。你的领导风格既有威严又有温情。",
                image: "🦍",
                imageUrl: "images/animals/猩猩.png",
                scores: { social: 3, energy: 3, mind: 4, risk: 2, environment: 4 }
            },
            {
                name: "犀牛",
                traits: ["坚韧", "固执", "力量", "直接"],
                description: "你的灵魂原型是犀牛！你坚韧而直接，有着不可动摇的决心。你的力量让你在困难面前毫不退缩，而你的直接让你能够快速解决问题。虽然有时显得固执，但这种坚持让你在重要事情上从不妥协。",
                image: "🦏",
                imageUrl: "images/animals/犀牛.png",
                scores: { social: 0, energy: 2, mind: 1, risk: 1, environment: 4 }
            },

            // === 跟随型动物 (environment: -5到-2) ===
            {
                name: "羊",
                traits: ["温和", "合群", "顺从", "和平主义"],
                description: "你的灵魂原型是羊！你温和合群，重视和谐与平静。你不喜欢冲突，宁愿跟随大多数人的意见来维持和平。你的顺从不是软弱，而是你选择的生活方式——通过配合他人来创造更美好的集体环境。",
                image: "🐑",
                imageUrl: "images/animals/羊.png",
                scores: { social: 4, energy: 0, mind: -2, risk: -3, environment: -4 }
            },
            {
                name: "兔子",
                traits: ["机敏", "创造力", "警觉", "温和"],
                description: "你的灵魂原型是兔子！你机敏而温和，有着丰富的创造力。你的警觉性让你能够及时发现风险，而你的温和让你在群体中备受欢迎。你更愿意作为支持者而不是领导者，在这种角色中找到自己的价值和快乐。",
                image: "🐇",
                imageUrl: "images/animals/兔子.png",
                scores: { social: 2, energy: 2, mind: 0, risk: -2, environment: -3 }
            },

            // === 特殊类型动物 ===
            {
                name: "变色龙",
                traits: ["适应环境", "观察者", "谨慎", "善于隐藏"],
                description: "你的灵魂原型是变色龙！你拥有惊人的适应能力，能够在各种环境中找到自己的位置。你是优秀的观察者，善于读懂气氛和人心。你的谨慎和隐藏能力不是伪装，而是你保护自己和理解世界的方式。",
                image: "🦎",
                imageUrl: "images/animals/变色龙.png",
                scores: { social: 0, energy: 0, mind: 3, risk: -1, environment: 0 }
            },
            {
                name: "凤凰",
                traits: ["重生", "神秘", "美丽", "永恒"],
                description: "你的灵魂原型是凤凰！你具有重生的力量，能够在挫折后以更强大的姿态崛起。你的美丽和神秘吸引着他人，而你内在的永恒品质让你在任何时代都保持 relevance。你相信结束意味着新的开始，这种信念让你无所畏惧。",
                image: "🔥",
                imageUrl: "images/animals/凤凰.png",
                scores: { social: 1, energy: 3, mind: 2, risk: 3, environment: 2 }
            },
            {
                name: "独角兽",
                traits: ["独特", "纯洁", "神秘", "魔法"],
                description: "你的灵魂原型是独角兽！你独特而纯洁，有着他人无法理解的魔法气质。你的存在本身就是一种奇迹，你的思维方式与众不同。你相信美好和奇迹，这种信念让你在平凡世界中创造出非凡的价值。",
                image: "🦄",
                imageUrl: "images/animals/独角兽.png",
                scores: { social: -1, energy: 2, mind: -3, risk: 1, environment: 0 }
            },
            {
                name: "龙",
                traits: ["力量", "智慧", "神秘", "守护者"],
                description: "你的灵魂原型是龙！你拥有巨大的力量和智慧，是珍贵的守护者。你的神秘感让他人既敬畏又好奇，而你内在的守护本能让你愿意为重要的事物付出一切。你相信真正的力量来自于内心的平衡和智慧。",
                image: "🐉",
                imageUrl: "images/animals/龙.png",
                scores: { social: -2, energy: 4, mind: 4, risk: 3, environment: 4 }
            },
            {
                name: "麒麟",
                traits: ["吉祥", "仁慈", "智慧", "和平"],
                description: "你的灵魂原型是麒麟！你仁慈而智慧，是和平与吉祥的象征。你的存在能够带来和谐与好运，你的智慧让你能够化解冲突、创造共赢。你相信善良和仁慈是最强大的力量，这种信念让你在任何情况下都保持尊严。",
                image: "🦌",
                imageUrl: "images/animals/麒麟.png",
                scores: { social: 2, energy: 2, mind: 3, risk: -1, environment: 1 }
            }
        ];

        // 维度分析描述库
        const dimensionDescriptions = {
            social: {
                high: "你是一个高度社交的个体，善于与人建立联系，在群体中如鱼得水。你享受团队合作，能够很好地理解他人需求。",
                medium: "你懂得平衡独处与社交，既能享受群体活动的乐趣，也需要个人空间来充电。",
                low: "你更倾向于独立思考和工作，在独处时最能发挥创造力。你选择性地建立深厚的关系。"
            },
            energy: {
                high: "你充满活力和热情，行动力强，喜欢快节奏的生活。你总是充满干劲，能够激励他人。",
                medium: "你的能量水平适中，懂得劳逸结合。你能够在需要时全力以赴，也懂得适时放松。",
                low: "你更喜欢平静稳定的生活节奏，善于深度思考和持久专注。你的力量在于沉稳和耐心。"
            },
            mind: {
                high: "你具有强大的逻辑思维能力，善于分析和解决问题。你做决定时更依赖理性和数据。",
                medium: "你能在理性与感性之间找到平衡，既考虑事实也顾及情感，决策更加全面。",
                low: "你具有敏锐的直觉和共情能力，善于理解他人感受。你的决策更多基于价值观和情感。"
            },
            risk: {
                high: "你勇于冒险，不畏惧未知，善于在变化中找到机会。你的勇气让你能够突破常规。",
                medium: "你懂得权衡风险与收益，既不会过于保守也不会盲目冒险，决策更加稳健。",
                low: "你注重安全和稳定，善于规避风险。你的谨慎让你能够建立可靠的基础。"
            }
        };

        // 优势和建议库
        const adviceLibrary = {
            strengths: {
                social: ["优秀的团队协作能力", "善于沟通表达", "建立广泛的人际网络", "理解他人需求"],
                energy: ["强大的行动力和执行力", "充满热情和感染力", "适应快节奏环境", "激励他人前进"],
                mind: ["出色的分析和逻辑能力", "理性决策", "解决问题的能力", "系统性思考"],
                risk: ["勇于尝试新事物", "适应变化能力强", "创新思维", "突破传统限制"]
            },
            weaknesses: {
                social: ["适当给自己独处时间", "学会拒绝不必要的社交", "培养独立完成任务的能力", "注意个人边界"],
                energy: ["学会放慢节奏", "培养耐心和持久力", "注意休息和恢复", "平衡工作与生活"],
                mind: ["多关注情感因素", "培养直觉判断", "考虑人际关系影响", "接纳不确定性"],
                risk: ["学习风险评估", "建立安全边界", "培养长期规划能力", "学会在稳定中创新"]
            }
        };

        // 全局变量
        let currentQuestion = 0;
        let userScores = { social: 0, energy: 0, mind: 0, risk: 0, environment: 0 };
        let selectedOption = null;

        // DOM元素
        const introSection = document.getElementById('intro-section');
        const testSection = document.getElementById('test-section');
        const resultSection = document.getElementById('result-section');
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const currentQuestionSpan = document.getElementById('current-question');
        const progressBar = document.getElementById('progress-bar');
        const resultName = document.getElementById('result-name');
        const resultImage = document.getElementById('result-image');
        const resultEmoji = document.getElementById('result-emoji');
        const imageLoading = document.getElementById('image-loading');
        const resultTraits = document.getElementById('result-traits');
        const resultDescription = document.getElementById('result-description');
        const testLimitWarning = document.getElementById('test-limit-warning');
        const previousResult = document.getElementById('previous-result');
        const viewPreviousResult = document.getElementById('view-previous-result');
        const resetTest = document.getElementById('reset-test');

        // 新增：维度分析DOM元素
        const socialDescription = document.getElementById('social-description');
        const energyDescription = document.getElementById('energy-description');
        const mindDescription = document.getElementById('mind-description');
        const riskDescription = document.getElementById('risk-description');
        const socialProgress = document.getElementById('social-progress');
        const energyProgress = document.getElementById('energy-progress');
        const mindProgress = document.getElementById('mind-progress');
        const riskProgress = document.getElementById('risk-progress');
        const socialValue = document.getElementById('social-value');
        const energyValue = document.getElementById('energy-value');
        const mindValue = document.getElementById('mind-value');
        const riskValue = document.getElementById('risk-value');
        const strengthsList = document.getElementById('strengths-list');
        const weaknessesList = document.getElementById('weaknesses-list');

        // 事件监听
        startBtn.addEventListener('click', startTest);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', restartTest);
        viewPreviousResult.addEventListener('click', showPreviousResult);
        resetTest.addEventListener('click', resetTestData);

        // 检查测试状态
        function checkTestStatus() {
            const hasTested = localStorage.getItem('animalTestCompleted');
            const testResult = localStorage.getItem('animalTestResult');
            
            if (hasTested === 'true' && testResult) {
                const result = JSON.parse(testResult);
                testLimitWarning.style.display = 'block';
                previousResult.textContent = result.name;
                startBtn.style.display = 'none';
            }
        }

        // 开始测试
        function startTest() {
            introSection.style.display = 'none';
            testSection.style.display = 'block';
            showQuestion();
        }

        // 显示问题
        function showQuestion() {
            const question = questions[currentQuestion];
            questionText.textContent = question.text;
            optionsContainer.innerHTML = '';
            
            currentQuestionSpan.textContent = currentQuestion + 1;
            progressBar.style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option.text;
                optionElement.dataset.index = index;
                optionElement.addEventListener('click', selectOption);
                optionsContainer.appendChild(optionElement);
            });
            
            nextBtn.disabled = true;
            selectedOption = null;
        }

        // 选择选项
        function selectOption(e) {
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            
            e.target.classList.add('selected');
            selectedOption = parseInt(e.target.dataset.index);
            nextBtn.disabled = false;
        }

        // 下一题
        function nextQuestion() {
            if (selectedOption === null) return;
            
            const selectedScores = questions[currentQuestion].options[selectedOption].scores;
            for (const key in selectedScores) {
                userScores[key] += selectedScores[key];
            }
            
            currentQuestion++;
            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        // 显示结果
        function showResult() {
            testSection.style.display = 'none';
            resultSection.style.display = 'block';
            
            const matchedAnimal = findClosestAnimal();
            
            resultName.textContent = matchedAnimal.name;
            resultDescription.textContent = matchedAnimal.description;
            
            // 图片显示逻辑
            resultImage.style.display = 'none';
            resultEmoji.style.display = 'none';
            imageLoading.style.display = 'flex';
            
            if (matchedAnimal.imageUrl) {
                const img = new Image();
                
                img.onload = function() {
                    imageLoading.style.display = 'none';
                    resultImage.src = matchedAnimal.imageUrl;
                    resultImage.alt = matchedAnimal.name;
                    resultImage.style.display = 'block';
                };
                
                img.onerror = function() {
                    imageLoading.style.display = 'none';
                    resultEmoji.textContent = matchedAnimal.image;
                    resultEmoji.style.display = 'flex';
                };
                
                img.src = matchedAnimal.imageUrl;
            } else {
                imageLoading.style.display = 'none';
                resultEmoji.textContent = matchedAnimal.image;
                resultEmoji.style.display = 'flex';
            }
            
            // 显示特质
            resultTraits.innerHTML = '';
            matchedAnimal.traits.forEach(trait => {
                const traitElement = document.createElement('div');
                traitElement.className = 'trait';
                traitElement.textContent = trait;
                resultTraits.appendChild(traitElement);
            });
            
            // 显示维度分析
            showDimensionAnalysis();
            
            // 保存测试状态
            localStorage.setItem('animalTestCompleted', 'true');
            localStorage.setItem('animalTestResult', JSON.stringify(matchedAnimal));
            localStorage.setItem('animalTestDate', new Date().toISOString());
            localStorage.setItem('userScores', JSON.stringify(userScores));
        }

        // 显示维度分析
        function showDimensionAnalysis() {
            // 计算每个维度的百分比（-5到5映射到0-100%）
            const socialPercent = ((userScores.social + 5) / 10) * 100;
            const energyPercent = ((userScores.energy + 5) / 10) * 100;
            const mindPercent = ((userScores.mind + 5) / 10) * 100;
            const riskPercent = ((userScores.risk + 5) / 10) * 100;
            
            // 设置进度条
            setTimeout(() => {
                socialProgress.style.width = socialPercent + '%';
                energyProgress.style.width = energyPercent + '%';
                mindProgress.style.width = mindPercent + '%';
                riskProgress.style.width = riskPercent + '%';
            }, 100);
            
            // 设置数值显示
            socialValue.textContent = getLevelText(userScores.social);
            energyValue.textContent = getLevelText(userScores.energy);
            mindValue.textContent = getLevelText(userScores.mind);
            riskValue.textContent = getLevelText(userScores.risk);
            
            // 设置描述
            socialDescription.textContent = getDimensionDescription('social', userScores.social);
            energyDescription.textContent = getDimensionDescription('energy', userScores.energy);
            mindDescription.textContent = getDimensionDescription('mind', userScores.mind);
            riskDescription.textContent = getDimensionDescription('risk', userScores.risk);
            
            // 设置优势和建议
            showAdvice();
        }

        // 获取维度水平文本
        function getLevelText(score) {
            if (score >= 3) return "非常高";
            if (score >= 1) return "较高";
            if (score >= -1) return "中等";
            if (score >= -3) return "较低";
            return "非常低";
        }

        // 获取维度描述
        function getDimensionDescription(dimension, score) {
            if (score >= 2) return dimensionDescriptions[dimension].high;
            if (score >= -2) return dimensionDescriptions[dimension].medium;
            return dimensionDescriptions[dimension].low;
        }

        // 显示优势和建议
        function showAdvice() {
            strengthsList.innerHTML = '';
            weaknessesList.innerHTML = '';
            
            // 根据分数选择建议
            const selectedStrengths = [];
            const selectedWeaknesses = [];
            
            // 社交维度
            if (userScores.social >= 2) {
                selectedStrengths.push(...adviceLibrary.strengths.social.slice(0, 1));
            } else if (userScores.social <= -2) {
                selectedWeaknesses.push(...adviceLibrary.weaknesses.social.slice(0, 1));
            }
            
            // 能量维度
            if (userScores.energy >= 2) {
                selectedStrengths.push(...adviceLibrary.strengths.energy.slice(0, 1));
            } else if (userScores.energy <= -2) {
                selectedWeaknesses.push(...adviceLibrary.weaknesses.energy.slice(0, 1));
            }
            
            // 思维维度
            if (userScores.mind >= 2) {
                selectedStrengths.push(...adviceLibrary.strengths.mind.slice(0, 1));
            } else if (userScores.mind <= -2) {
                selectedWeaknesses.push(...adviceLibrary.weaknesses.mind.slice(0, 1));
            }
            
            // 风险维度
            if (userScores.risk >= 2) {
                selectedStrengths.push(...adviceLibrary.strengths.risk.slice(0, 1));
            } else if (userScores.risk <= -2) {
                selectedWeaknesses.push(...adviceLibrary.weaknesses.risk.slice(0, 1));
            }
            
            // 填充优势列表
            selectedStrengths.forEach(strength => {
                const li = document.createElement('div');
                li.textContent = '✓ ' + strength;
                li.style.marginBottom = '5px';
                strengthsList.appendChild(li);
            });
            
            // 填充建议列表
            selectedWeaknesses.forEach(weakness => {
                const li = document.createElement('div');
                li.textContent = '• ' + weakness;
                li.style.marginBottom = '5px';
                weaknessesList.appendChild(li);
            });
            
            // 如果没有特别突出的维度，给出平衡性建议
            if (selectedStrengths.length === 0) {
                const li = document.createElement('div');
                li.textContent = '✓ 性格平衡，适应性强';
                strengthsList.appendChild(li);
            }
            
            if (selectedWeaknesses.length === 0) {
                const li = document.createElement('div');
                li.textContent = '• 继续保持当前的平衡状态';
                weaknessesList.appendChild(li);
            }
        }

        // 找到最匹配的动物
        function findClosestAnimal() {
            let minDistance = Infinity;
            let closestAnimal = animals[0];
            
            animals.forEach(animal => {
                let distance = 0;
                for (const key in userScores) {
                    distance += Math.pow(userScores[key] - animal.scores[key], 2);
                }
                distance = Math.sqrt(distance);
                
                if (distance < minDistance) {
                    minDistance = distance;
                    closestAnimal = animal;
                }
            });
            
            return closestAnimal;
        }

        // 显示上次结果
        function showPreviousResult() {
            const testResult = JSON.parse(localStorage.getItem('animalTestResult'));
            const savedScores = JSON.parse(localStorage.getItem('userScores'));
            
            if (testResult) {
                introSection.style.display = 'none';
                resultSection.style.display = 'block';
                
                resultName.textContent = testResult.name;
                resultDescription.textContent = testResult.description;
                
                // 图片显示逻辑
                resultImage.style.display = 'none';
                resultEmoji.style.display = 'none';
                imageLoading.style.display = 'flex';
                
                if (testResult.imageUrl) {
                    const img = new Image();
                    
                    img.onload = function() {
                        imageLoading.style.display = 'none';
                        resultImage.src = testResult.imageUrl;
                        resultImage.alt = testResult.name;
                        resultImage.style.display = 'block';
                    };
                    
                    img.onerror = function() {
                        imageLoading.style.display = 'none';
                        resultEmoji.textContent = testResult.image;
                        resultEmoji.style.display = 'flex';
                    };
                    
                    img.src = testResult.imageUrl;
                } else {
                    imageLoading.style.display = 'none';
                    resultEmoji.textContent = testResult.image;
                    resultEmoji.style.display = 'flex';
                }
                
                // 显示特质
                resultTraits.innerHTML = '';
                testResult.traits.forEach(trait => {
                    const traitElement = document.createElement('div');
                    traitElement.className = 'trait';
                    traitElement.textContent = trait;
                    resultTraits.appendChild(traitElement);
                });
                
                // 显示维度分析（如果有保存的分数）
                if (savedScores) {
                    userScores = savedScores;
                    showDimensionAnalysis();
                }
            }
        }

        // 重置测试数据
        function resetTestData() {
            if (confirm('确定要重置测试吗？这将清除您之前的测试结果，您可以重新进行测试。')) {
                localStorage.removeItem('animalTestCompleted');
                localStorage.removeItem('animalTestResult');
                localStorage.removeItem('animalTestDate');
                localStorage.removeItem('userScores');
                location.reload();
            }
        }

        // 重新测试
        function restartTest() {
            currentQuestion = 0;
            userScores = { social: 0, energy: 0, mind: 0, risk: 0, environment: 0 };
            selectedOption = null;
            
            resultSection.style.display = 'none';
            introSection.style.display = 'block';
            
            // 重新显示开始按钮
            startBtn.style.display = 'block';
            testLimitWarning.style.display = 'none';
        }
    </script>
</body>
</html>